<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Register - Taigour's E-Sports</title>
    <link rel="icon" href="assets/Taigours E-sports logo.png" type="x-icon">
    <link rel="stylesheet" href="register.css">
</head>
<body>
    <!-- Header / Navigation Bar -->
    <header>
        <div class="logo">
            <img src="assets/Taigours E-sports logo.png" alt="Logo">
        </div>
        <nav>
            <a href="index.html">Home</a>
            <a href="schedule.html">Schedule</a>
            <a href="leaderboard.html">Leaderboard</a>
            <a href="register.html">Register</a>
        </nav>
    </header>

    <!-- Registration Form Section -->
    <div class="container">
        <div class="registration-form">
            <h2>Register for Tournament </h2>

            <form id="registration-form">
                <!-- Squad Details -->
                <label for="squad-name">Squad Name</label>
                <input type="text" id="squad-name" name="squad-name" placeholder="Squad Name" required>

                <!-- Squad Photo Upload -->
                <label for="squad-photo">Squad Photo</label>
                <input type="file" id="squad-photo" name="squad-photo" accept="image/*" required>

                <!-- Member Details -->
                <label for="team-member1">Member 1 UID</label>
                <input type="text" id="team-member1" name="team-member1" placeholder="Member 1 UID" required>

                <label for="team-member2">Member 2 UID</label>
                <input type="text" id="team-member2" name="team-member2" placeholder="Member 2 UID" required>

                <label for="team-member3">Member 3 UID</label>
                <input type="text" id="team-member3" name="team-member3" placeholder="Member 3 UID" required>

                <label for="team-member4">Member 4 UID</label>
                <input type="text" id="team-member4" name="team-member4" placeholder="Member 4 UID" required>

                <!-- Captain Details -->
                <label for="captain-name">Captain Name</label>
                <input type="text" id="captain-name" name="captain-name" placeholder="Captain's Name" required>

                <label for="captain-contact">Captain's Contact</label>
                <input type="tel" id="captain-contact" name="captain-contact" placeholder="Captain's Mobile Number" required>

                <!-- Terms and Conditions -->
                <div class="terms">
                    <input type="checkbox" id="terms" name="terms" required>
                    <label for="terms">I agree to the <a href="terms.html" target="_blank">Terms & Conditions</a></label>
                </div>

                <!-- Entry Charge Text -->
                <p class="entry-charge">Entry Charge: <strong>RS 80/-</strong></p>

                <!-- Payment Button -->
                <button type="button" class="pay-button" id="submit-button">Pay & Register</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Gaming Tournament. All Rights Reserved.</p>
    </footer>

    <script>
        document.getElementById('submit-button').addEventListener('click', async () => {
            const form = document.getElementById('registration-form');
            const formData = new FormData(form);

            const data = {
                squadName: formData.get('squad-name'),
                member1: formData.get('team-member1'),
                member2: formData.get('team-member2'),
                member3: formData.get('team-member3'),
                member4: formData.get('team-member4'),
                captainName: formData.get('captain-name'),
                captainContact: formData.get('captain-contact'),
            };

            const squadPhoto = formData.get('squad-photo');

            // Convert data to text file format
            const textFileContent = `Squad Name: ${data.squadName}\n` +
                                    `Member 1 UID: ${data.member1}\n` +
                                    `Member 2 UID: ${data.member2}\n` +
                                    `Member 3 UID: ${data.member3}\n` +
                                    `Member 4 UID: ${data.member4}\n` +
                                    `Captain Name: ${data.captainName}\n` +
                                    `Captain Contact: ${data.captainContact}\n`;

            const textBlob = new Blob([textFileContent], { type: 'text/plain' });
            const textFile = new File([textBlob], 'form-data.txt', { type: 'text/plain' });

            const formDataForUpload = new FormData();
            formDataForUpload.append('textFile', textFile);
            formDataForUpload.append('squadPhoto', squadPhoto);

            try {
                const response = await fetch('https://your-google-drive-api-endpoint', {
                    method: 'POST',
                    body: formDataForUpload
                });

                if (response.ok) {
                    alert('Registration successful!');
                } else {
                    alert('Failed to upload. Please try again.');
                }
            } catch (error) {
                console.error('Error uploading data:', error);
                alert('An error occurred. Please try again later.');
            }
        });
    </script>
</body>
</html>
